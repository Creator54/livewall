#!/bin/bash

loc=/tmp/frames
function extractor(){
    rm -rf $loc;
    read -p "Give video location: " vid;
    read -p "Give fps count: " fps;
    mkdir $loc;
    echo 'extracting frames ...';
    ffmpeg -i $vid -r $fps $loc/%d.jpg &> /dev/null;
    setter;
}

function setter(){
    i=1;
    echo "wallsetter started !"; 
    while true
    do
        nitrogen $loc/$i.jpg --set-auto;
        ((i++));
        if [ $i -eq $(ls $loc/| wc -l) ]
        then
            i=1;
        fi
    done
}

"$@"
